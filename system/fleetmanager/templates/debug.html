{% extends "layout.html" %}

{% block title %}
    SentryD
{% endblock %}

{% block main %}
<div id="debug-container" style="font-size: 28px;">
  <!-- JSON data will be displayed here -->
</div>

<div id="image-container">
  <img id="frontImage" alt="Front Image">
  <img id="backImage" alt="Back Image">
</div>

<script>
  function fetchData() {
    fetch('sentryjson.json')
      .then(response => response.json())
      .then(data => {
        // Create an HTML string for each key-value pair
        const htmlString = Object.entries(data)
          .map(([key, value]) => `<strong>${key}:</strong> ${value}<br>`)
          .join('');

        // Update the content in the 'debug-container' div
        document.getElementById('debug-container').innerHTML = htmlString;

        // Update the 'src' attribute of the front image
        document.getElementById('frontImage').src = '/images/back_image.jpg';
        // Update the 'src' attribute of the back image
        document.getElementById('backImage').src = '/images/front_image.jpg';
      })
      .catch(error => console.error('Error fetching data:', error));
  }

  // Initial fetch
  fetchData();

  // Set up a timer to fetch data every 5 seconds
  setInterval(fetchData, 2000);
</script>
{% endblock %}
